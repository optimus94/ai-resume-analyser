import{w as p,x,a,p as e}from"./chunk-4WY6JWTD-Dcf9bGPO.js";import{u as w}from"./puter-CplJNx_h.js";const b=()=>{const{auth:r,isLoading:s,error:o,fs:i,kv:d}=w(),u=x(),[c,f]=a.useState([]),n=async()=>{const t=await i.readDir("./");f(t)};a.useEffect(()=>{n()},[]),a.useEffect(()=>{!s&&!r.isAuthenticated&&u("/auth?next=/wipe")},[s]);const m=async()=>{if(window.confirm("Are you sure you want to delete ALL files? This action cannot be undone.")){for(const l of c)await i.delete(l.path);await d.flush(),n()}},h=async t=>{window.confirm("Are you sure you want to delete this file?")&&(await i.delete(t),n())};return s?e.jsx("div",{children:"Loading..."}):o?e.jsxs("div",{children:["Error: ",o]}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:["Authenticated as: ",r.user?.username]}),e.jsx("div",{className:"mb-2 font-semibold",children:"Existing files:"}),e.jsx("div",{className:"flex flex-col gap-4",children:c.map(t=>e.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[e.jsx("p",{children:t.name}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded-md hover:bg-red-600 transition",onClick:()=>h(t.path),children:"Delete"})]},t.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition",onClick:m,children:"Wipe App Data"})})]})},g=p(b);export{g as default};
